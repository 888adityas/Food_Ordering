{"ast":null,"code":"import _slicedToArray from\"C:/Users/Win10/Documents/GitHub/food_/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"C:/Users/Win10/Documents/GitHub/food_/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/Win10/Documents/GitHub/food_/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useReducer,useCallback}from'react';import CartContext from\"./cart-context\";import{jsx as _jsx}from\"react/jsx-runtime\";var defaultCartState={items:[],totalAmount:0,searchValue:''};var cartReducer=function cartReducer(state,action){if(action.type==='ADD'){var updatedTotalAmount=state.totalAmount+action.item.price*action.item.amount;var existingCartItemIndex=state.items.findIndex(function(item){return item.id===action.item.id;});var existingCartItem=state.items[existingCartItemIndex];var excessAmount=existingCartItem&&existingCartItem.amount+action.item.amount;if(excessAmount&&excessAmount>10){return{items:state.items,totalAmount:state.totalAmount,searchValue:state.searchValue};}var updatedItems;if(existingCartItem){var updatedItem=_objectSpread(_objectSpread({},existingCartItem),{},{amount:existingCartItem.amount+action.item.amount});updatedItems=_toConsumableArray(state.items);updatedItems[existingCartItemIndex]=updatedItem;// if (updatedItem.amount > 10) {\n//     return {\n//         items: state.item,\n//         totalAmount: state.totalAmount,\n//         searchValue: state.searchValue\n//     }\n// }\nreturn{items:updatedItems,totalAmount:updatedTotalAmount,searchValue:state.searchValue};}else{return{items:state.items.concat(action.item),totalAmount:state.totalAmount+action.item.price*action.item.amount,searchValue:state.searchValue};}};if(action.type==='REMOVE'){var updatedCartItemIndex=state.items.findIndex(function(item){return item.id===action.id;});var updatedCartItem=state.items[updatedCartItemIndex];var _updatedTotalAmount=state.totalAmount-updatedCartItem.price;var _updatedItems;if(updatedCartItem.amount===1){_updatedItems=state.items.filter(function(item){return item.id!==action.id;});return{items:_updatedItems,totalAmount:_updatedTotalAmount,searchValue:state.searchValue};}else{var _updatedItem=_objectSpread(_objectSpread({},updatedCartItem),{},{amount:updatedCartItem.amount-1});_updatedItems=_toConsumableArray(state.items);_updatedItems[updatedCartItemIndex]=_updatedItem;return{items:_updatedItems,totalAmount:_updatedTotalAmount,searchValue:state.searchValue};}};if(action.type==='SEARCH'){return{items:state.items,totalAmount:state.totalAmount,searchValue:action.val};}if(action.type==='CLEAR'){return _objectSpread(_objectSpread({},defaultCartState),{},{searchValue:state.searchValue});}return defaultCartState;};var CartProvider=function CartProvider(props){var _useReducer=useReducer(cartReducer,defaultCartState),_useReducer2=_slicedToArray(_useReducer,2),cartState=_useReducer2[0],dispatchCart=_useReducer2[1];var addItemToCartHandler=function addItemToCartHandler(item){dispatchCart({type:'ADD',item:item});};var removeItemFromCartHandler=function removeItemFromCartHandler(id){dispatchCart({type:'REMOVE',id:id});};var searchMealHandler=useCallback(function(value){dispatchCart({type:'SEARCH',val:value});},[]);var clearCartHandler=function clearCartHandler(){dispatchCart({type:'CLEAR'});};var cartContext={items:cartState.items,totalAmount:cartState.totalAmount,searchValue:cartState.searchValue,addItem:addItemToCartHandler,removeItem:removeItemFromCartHandler,clearCart:clearCartHandler,searchMeal:searchMealHandler};return/*#__PURE__*/_jsx(CartContext.Provider,{value:cartContext,children:props.children});};export default CartProvider;","map":{"version":3,"names":["useReducer","useCallback","CartContext","defaultCartState","items","totalAmount","searchValue","cartReducer","state","action","type","updatedTotalAmount","item","price","amount","existingCartItemIndex","findIndex","id","existingCartItem","excessAmount","updatedItems","updatedItem","concat","updatedCartItemIndex","updatedCartItem","filter","val","CartProvider","props","cartState","dispatchCart","addItemToCartHandler","removeItemFromCartHandler","searchMealHandler","value","clearCartHandler","cartContext","addItem","removeItem","clearCart","searchMeal","children"],"sources":["C:/Users/Win10/Documents/GitHub/food_/src/store/cart-provider.js"],"sourcesContent":["import { useReducer, useCallback } from 'react';\r\nimport CartContext from \"./cart-context\"\r\n\r\nconst defaultCartState = {\r\n    items: [],\r\n    totalAmount: 0,\r\n    searchValue: ''\r\n};\r\n\r\nconst cartReducer = (state, action) => {\r\n    if (action.type === 'ADD') {\r\n\r\n        const updatedTotalAmount = state.totalAmount + action.item.price * action.item.amount;\r\n        const existingCartItemIndex = state.items.findIndex(item => item.id === action.item.id)\r\n        const existingCartItem = state.items[existingCartItemIndex]\r\n        const excessAmount = existingCartItem && existingCartItem.amount + action.item.amount\r\n        if (excessAmount && excessAmount > 10) {\r\n            return {\r\n                items: state.items,\r\n                totalAmount: state.totalAmount,\r\n                searchValue: state.searchValue\r\n            }\r\n        }\r\n        let updatedItems;\r\n        if (existingCartItem) {\r\n            const updatedItem = {\r\n                ...existingCartItem,\r\n                amount: existingCartItem.amount + action.item.amount\r\n            };\r\n\r\n            updatedItems = [...state.items];\r\n            updatedItems[existingCartItemIndex] = updatedItem;\r\n\r\n            // if (updatedItem.amount > 10) {\r\n            //     return {\r\n            //         items: state.item,\r\n            //         totalAmount: state.totalAmount,\r\n            //         searchValue: state.searchValue\r\n            //     }\r\n            // }\r\n\r\n            return {\r\n                items: updatedItems,\r\n                totalAmount: updatedTotalAmount,\r\n                searchValue: state.searchValue\r\n            }\r\n        } else {\r\n            return {\r\n                items: state.items.concat(action.item),\r\n                totalAmount: state.totalAmount + action.item.price * action.item.amount,\r\n                searchValue: state.searchValue\r\n            }\r\n        }\r\n\r\n    };\r\n    if (action.type === 'REMOVE') {\r\n        const updatedCartItemIndex = state.items.findIndex(item => item.id === action.id);\r\n        const updatedCartItem = state.items[updatedCartItemIndex]\r\n        const updatedTotalAmount = state.totalAmount - updatedCartItem.price;\r\n\r\n        let updatedItems;\r\n\r\n        if (updatedCartItem.amount === 1) {\r\n            updatedItems = state.items.filter(item => item.id !== action.id);\r\n            return {\r\n                items: updatedItems,\r\n                totalAmount: updatedTotalAmount,\r\n                searchValue: state.searchValue\r\n            }\r\n        }\r\n        else {\r\n            const updatedItem = {\r\n                ...updatedCartItem,\r\n                amount: updatedCartItem.amount - 1\r\n            }\r\n            updatedItems = [...state.items];\r\n            updatedItems[updatedCartItemIndex] = updatedItem;\r\n            return {\r\n                items: updatedItems,\r\n                totalAmount: updatedTotalAmount,\r\n                searchValue: state.searchValue\r\n            }\r\n        }\r\n\r\n    };\r\n    if (action.type === 'SEARCH') {\r\n        return {\r\n            items: state.items,\r\n            totalAmount: state.totalAmount,\r\n            searchValue: action.val\r\n        }\r\n    }\r\n    if (action.type === 'CLEAR') {\r\n        return {\r\n            ...defaultCartState,\r\n            searchValue: state.searchValue\r\n        }\r\n    }\r\n\r\n    return defaultCartState;\r\n};\r\n\r\nconst CartProvider = (props) => {\r\n    const [cartState, dispatchCart] = useReducer(cartReducer, defaultCartState);\r\n\r\n    const addItemToCartHandler = (item) => {\r\n        dispatchCart({ type: 'ADD', item: item });\r\n    };\r\n    const removeItemFromCartHandler = (id) => {\r\n        dispatchCart({ type: 'REMOVE', id: id });\r\n    };\r\n    const searchMealHandler = useCallback((value) => {\r\n        dispatchCart({ type: 'SEARCH', val: value })\r\n    }, []);\r\n    const clearCartHandler = () => {\r\n        dispatchCart({ type: 'CLEAR' })\r\n    };\r\n\r\n\r\n    const cartContext = {\r\n        items: cartState.items,\r\n        totalAmount: cartState.totalAmount,\r\n        searchValue: cartState.searchValue,\r\n        addItem: addItemToCartHandler,\r\n        removeItem: removeItemFromCartHandler,\r\n        clearCart: clearCartHandler,\r\n        searchMeal: searchMealHandler,\r\n    };\r\n\r\n\r\n    return (\r\n        <CartContext.Provider value={cartContext}>\r\n            {props.children}\r\n        </CartContext.Provider>\r\n    );\r\n};\r\n\r\nexport default CartProvider;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}